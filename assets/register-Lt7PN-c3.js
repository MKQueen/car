import{r as m,h as I,j as $,d as c,o as b,c as h,b as l,w as i,u as a,a as p,e as C,t as z,k as N,l as R,g as B}from"./index-DCta1jbJ.js";import{b as W,g as L,R as A}from"./api-D3SolMte.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as f,C as M}from"./md5-BG7zz89V.js";const E={class:"div-form-container"},F=["src"],T={style:{margin:"16px"}},j={__name:"registerForm",setup(x,{emit:g}){m(""),m("");const d=m(0);let t=null;const o={mobile:[{required:!0,message:"请填写手机号"}],passWord:[{required:!0,message:"请填写6-18位密码"}],repeatpassWord:[{required:!0,message:"请再次输入6-18位密码"}],regCode:[{required:!0,message:"请填写图形验证码"}],verifyCode:[{required:!0,message:"请填写短信验证码"}]},_=g;let v=m(""),e=I({mobile:"",passWord:"",repeatpassWord:"",regCode:"",verifyCode:"",uid:""});$(()=>{v.value=W+"code/loginCode?uid="+y()});const S=()=>{f({type:"success",message:"图片验证码刷新成功"}),v.value=W+"code/loginCode?uid="+y()},U=()=>{if(d.value<=0){if(!e.mobile||!e.regCode){console.log("请先输入手机号"),f({type:"danger",message:"请先输入手机号，填写图形验证码"});return}console.log("短信已发送"),L({mobile:e.mobile,uid:e.uid,regCode:e.regCode}),d.value=60,clearInterval(t),t=setInterval(()=>{d.value>0?d.value--:clearInterval(t)},1e3)}},y=()=>{let s=Math.floor(Math.random()*10)+"";return s+=Math.floor(Math.random()*10)+"",s+=Math.floor(Math.random()*10)+"",s+=Math.floor(Math.random()*10)+"",s+=Math.floor(Math.random()*10)+"",s+=Math.floor(Math.random()*10)+"",s=new Date().getTime()+s,e.uid=s,s},k=s=>{console.log("submit",s),_("register-event",e)};return(s,r)=>{const u=c("van-field"),V=c("van-button"),D=c("van-cell-group"),q=c("van-form");return b(),h("div",E,[l(q,{rules:o,onSubmit:k},{default:i(()=>[l(D,{inset:""},{default:i(()=>[l(u,{modelValue:a(e).mobile,"onUpdate:modelValue":r[0]||(r[0]=n=>a(e).mobile=n),type:"text",autocomplete:"off",name:"mobile",placeholder:"请输入手机号",rules:o.mobile},null,8,["modelValue","rules"]),l(u,{modelValue:a(e).passWord,"onUpdate:modelValue":r[1]||(r[1]=n=>a(e).passWord=n),type:"password",autocomplete:"off",name:"passWord",placeholder:"请输入6-18位密码",rules:o.passWord},null,8,["modelValue","rules"]),l(u,{modelValue:a(e).repeatpassWord,"onUpdate:modelValue":r[2]||(r[2]=n=>a(e).repeatpassWord=n),type:"password",autocomplete:"off",name:"repeatpassWord",placeholder:"请再次输入6-18位密码",rules:o.repeatpassWord},null,8,["modelValue","rules"]),l(u,{modelValue:a(e).regCode,"onUpdate:modelValue":r[3]||(r[3]=n=>a(e).regCode=n),autocomplete:"off",center:"",clearable:"",placeholder:"请输入短信验证码",rules:o.regCode,name:"regCode"},{button:i(()=>[p("img",{src:a(v),alt:"",class:"img-code",onClick:S},null,8,F)]),_:1},8,["modelValue","rules"]),l(u,{modelValue:a(e).verifyCode,"onUpdate:modelValue":r[4]||(r[4]=n=>a(e).verifyCode=n),autocomplete:"off",center:"",clearable:"",placeholder:"请输入短信验证码",rules:o.verifyCode,name:"smsCode"},{button:i(()=>[l(V,{size:"small",type:"primary",onClick:U,disabled:d.value>0,color:"#1A36D6"},{default:i(()=>[C(z(d.value>0?`${d.value}s后重新发送`:"发送验证码"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),p("div",T,[l(V,{type:"primary",size:"normal",block:"","native-type":"submit",color:"#1A36D6"},{default:i(()=>[C("提交")]),_:1})])]),_:1})])}}},G=w(j,[["__scopeId","data-v-7596bd82"]]),H={class:"div-wrap"},J={class:"div-container"},K={class:"div-title"},O={class:"div-tab"},P={__name:"register",setup(x){const g=B(),d=async t=>{console.log(t),t.passWord=M.md5(t.passWord),t.repeatpassWord=M.md5(t.repeatpassWord);const o=await A(t);console.log(o),o.success?(f({type:"success",message:o.msg}),await g.push({path:"/contractLoan/"})):f({type:"warning",message:o.msg})};return(t,o)=>{const _=N("font-size");return b(),h("div",H,[p("div",J,[R((b(),h("div",K,[C("注册")])),[[_,{pc:32,mobile:24}]]),p("div",O,[l(G,{onRegisterEvent:d})])])])}}},ee=w(P,[["__scopeId","data-v-cbdd89ab"]]);export{ee as default};
