import{b as V,g as q,p as I,s as M,a as j}from"./api-D3SolMte.js";import{r as k,h as L,j as W,d as u,o as w,c as S,b as a,w as i,u as s,a as v,e as x,t as z,k as T,l as F,i as N,g as B}from"./index-DCta1jbJ.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{s as f,C as E}from"./md5-BG7zz89V.js";const R={class:"div-form-container"},P=["src"],G={style:{margin:"16px"}},H={__name:"phoneForm",setup(U,{emit:g}){const n=k(0);let m=null;const _=g,e={mobile:[{required:!0,message:"请填写手机号"}],loginCode:[{required:!0,message:"请填写图形验证码"}],verifyCode:[{required:!0,message:"请填写短信验证码"}]};let o=k(""),t=L({mobile:"",loginCode:"",verifyCode:"",uid:"",userType:"1"});W(()=>{o.value=V+"code/loginCode?uid="+d()});const b=r=>{console.log("submit",r),_("login-event",t)},l=()=>{f({type:"success",message:"图片验证码刷新成功"}),o.value=V+"code/loginCode?uid="+d()},d=()=>{let r=Math.floor(Math.random()*10)+"";return r+=Math.floor(Math.random()*10)+"",r+=Math.floor(Math.random()*10)+"",r+=Math.floor(Math.random()*10)+"",r+=Math.floor(Math.random()*10)+"",r+=Math.floor(Math.random()*10)+"",r=new Date().getTime()+r,t.uid=r,r},h=()=>{if(!t.mobile||!t.loginCode){console.log("请先输入手机号"),f({type:"danger",message:"请先输入手机号，填写图形验证码"});return}q({mobile:t.mobile,uid:t.uid,regCode:t.loginCode}),n.value<=0&&(console.log("短信已发送"),n.value=60,clearInterval(m),m=setInterval(()=>{n.value>0?n.value--:clearInterval(m)},1e3))};return(r,c)=>{const C=u("van-field"),p=u("van-button"),$=u("van-cell-group"),A=u("van-form");return w(),S("div",R,[a(A,{onSubmit:b,rules:e},{default:i(()=>[a($,{inset:""},{default:i(()=>[a(C,{modelValue:s(t).mobile,"onUpdate:modelValue":c[0]||(c[0]=y=>s(t).mobile=y),name:"mobile",type:"tel",placeholder:"请输入手机号",autocomplete:"off",rules:e.mobile},null,8,["modelValue","rules"]),a(C,{autocomplete:"off",modelValue:s(t).loginCode,"onUpdate:modelValue":c[1]||(c[1]=y=>s(t).loginCode=y),name:"loginCode",center:"",clearable:"",placeholder:"请输入图形验证码",rules:e.loginCode},{button:i(()=>[v("img",{src:s(o),alt:"",class:"img-code",onClick:l},null,8,P)]),_:1},8,["modelValue","rules"]),a(C,{autocomplete:"off",modelValue:s(t).verifyCode,"onUpdate:modelValue":c[2]||(c[2]=y=>s(t).verifyCode=y),name:"verifyCode",center:"",clearable:"",placeholder:"请输入短信验证码",rules:e.verifyCode},{button:i(()=>[a(p,{size:"small",type:"primary",onClick:h,color:"#1A36D6",disabled:n.value>0},{default:i(()=>[x(z(n.value>0?`${n.value}s后重新发送`:"发送验证码"),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue","rules"])]),_:1}),v("div",G,[a(p,{type:"primary",size:"normal",block:"","native-type":"submit",color:"#1A36D6"},{default:i(()=>[x("提交")]),_:1})])]),_:1})])}}},J=D(H,[["__scopeId","data-v-6a0b6ae7"]]),K={class:"div-form-container"},O=["src"],Q={style:{margin:"16px"}},X={__name:"passwordForm",setup(U,{emit:g}){const n=g,m={mobile:[{required:!0,message:"请填写手机号"}],passWord:[{required:!0,message:"请填写密码"}],loginCode:[{required:!0,message:"请填写图形验证码"}]};let _=k(""),e=L({mobile:"",passWord:"",loginCode:"",uid:"",userType:"1"});W(()=>{_.value=V+"code/loginCode?uid="+t()});const o=()=>{f({type:"success",message:"图片验证码刷新成功"}),_.value=V+"code/loginCode?uid="+t()},t=()=>{let l=Math.floor(Math.random()*10)+"";return l+=Math.floor(Math.random()*10)+"",l+=Math.floor(Math.random()*10)+"",l+=Math.floor(Math.random()*10)+"",l+=Math.floor(Math.random()*10)+"",l+=Math.floor(Math.random()*10)+"",l=new Date().getTime()+l,e.uid=l,l},b=l=>{n("register-event",e)};return(l,d)=>{const h=u("van-field"),r=u("van-cell-group"),c=u("van-button"),C=u("van-form");return w(),S("div",K,[a(C,{rules:m,onSubmit:b},{default:i(()=>[a(r,{inset:""},{default:i(()=>[a(h,{modelValue:s(e).mobile,"onUpdate:modelValue":d[0]||(d[0]=p=>s(e).mobile=p),modelModifiers:{number:!0},type:"text",autocomplete:"off",name:"mobile",placeholder:"请输入账号",rules:m.mobile},null,8,["modelValue","rules"]),a(h,{modelValue:s(e).passWord,"onUpdate:modelValue":d[1]||(d[1]=p=>s(e).passWord=p),type:"password",autocomplete:"off",name:"passWord",placeholder:"请输入密码",rules:m.passWord},null,8,["modelValue","rules"]),a(h,{autocomplete:"off",modelValue:s(e).loginCode,"onUpdate:modelValue":d[2]||(d[2]=p=>s(e).loginCode=p),name:"loginCode",center:"",clearable:"",placeholder:"请输入图形验证码",rules:m.loginCode},{button:i(()=>[v("img",{src:s(_),alt:"",class:"img-code",onClick:o},null,8,O)]),_:1},8,["modelValue","rules"])]),_:1}),v("div",Q,[a(c,{type:"primary",size:"normal",block:"","native-type":"submit",color:"#1A36D6"},{default:i(()=>[x("提交")]),_:1})])]),_:1})])}}},Y=D(X,[["__scopeId","data-v-505404df"]]),Z={class:"div-wrap"},ee={class:"div-container"},oe={class:"div-title"},te={class:"div-tab"},ae={__name:"login",setup(U){const g=B();let n=k(0);const m=e=>{console.log(e),I(e).then(o=>{console.log(o),o.msg==="图形验证码错误"?f({type:"warning",message:o.msg}):(M("token",o.obj.token,7),M("vue_admin_template_token",o.obj.token,7),f({type:"success",message:"登录成功"}),g.push({path:"/contractLoan/home"}))})},_=async e=>{console.log(e),e.passWord=E.md5(e.passWord);const o=await j(e);o.success?(M("token",o.obj.token,7),M("vue_admin_template_token",o.obj.token,7),f({type:"success",message:"登录成功"}),await g.push({path:"/contractLoan/home"})):f({type:"warning",message:o.msg})};return(e,o)=>{const t=u("van-tab"),b=u("van-tabs"),l=T("font-size");return w(),S("div",Z,[v("div",ee,[F((w(),S("div",oe,[x("登录")])),[[l,{pc:32,mobile:24}]]),v("div",te,[a(b,{active:s(n),"onUpdate:active":o[0]||(o[0]=d=>N(n)?n.value=d:n=d),color:"#1A36D6","title-active-color":"#1A36D6","title-inactive-color":"#000000"},{default:i(()=>[a(t,{title:"手机号","title-class":"tab-title-left"},{default:i(()=>[a(J,{onLoginEvent:m})]),_:1}),a(t,{title:"账号密码","title-class":"tab-title-right"},{default:i(()=>[a(Y,{onRegisterEvent:_})]),_:1})]),_:1},8,["active"])])])])}}},ie=D(ae,[["__scopeId","data-v-8691eb2d"]]);export{ie as default};
